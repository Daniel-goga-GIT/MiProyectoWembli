{% extends 'base.html.twig' %}
{% block title %}Productos - Wembli{% endblock %}
{% block contenido %}
<h2 style="color:#1E3A8A; margin-bottom:15px;">Lista de productos</h2>
{% if productos is not empty %}
    <table style="width:100%; border-collapse: collapse; text-align:left;">
        <thead>
            <tr style="background-color:#1E40AF; color:white;">
                <th style="padding:10px;">ID</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Categor√≠a</th>
                <th>Creador</th>
                <th>Cantidad</th>
                <th>Acci√≥n</th>
            </tr>
        </thead>
        <tbody>
            {% for producto in productos %}
                <tr style="border-bottom:1px solid #ccc;">
                    <td style="padding:8px;">{{ producto.id }}</td>
                    <td>{{ producto.nombre }}</td>
                    <td>{{ producto.precio|number_format(2, ',', '.') }} ‚Ç¨</td>
                    <td>{{ producto.categoria.nombre ?? 'Sin categor√≠a' }}</td>
                    <td>{{ producto.creador.login ?? 'Desconocido' }}</td>
                    <td>
                        {% if app.user %}
                            <form method="POST" action="{{ path('anadir') }}" style="display:inline-flex; align-items:center; gap:8px;">
                                <input type="hidden" name="productos_id[]" value="{{ producto.id }}">
                                <input type="number" 
                                       name="unidades[]" 
                                       value="1" 
                                       min="1" 
                                       max="999"
                                       style="width:60px; padding:5px; border:1px solid #ccc; border-radius:4px;">
                        {% else %}
                            <span style="color: #aaa;">-</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if app.user %}
                                <button type="submit" 
                                       style="background-color:#10B981; color:white; padding:5px 15px; border-radius:5px; border:none; cursor:pointer; white-space:nowrap;"
                                       onmouseover="this.style.backgroundColor='#059669';" 
                                       onmouseout="this.style.backgroundColor='#10B981';">
                                   A√±adir a cesta
                                </button>
                            </form>
                        {% else %}
                            <span style="color: #aaa;">Inicia sesi√≥n</span>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No hay productos disponibles üòÖ</p>
{% endif %}
{% endblock %}