{# templates/pedidos/pedidos.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Mis pedidos - Wembli{% endblock %}

{% block contenido %}
    <h2>Mis pedidos</h2>

    {% if pedidos is not empty %}
        {% for pedido in pedidos %}
            <h3>Pedido #{{ pedido.codigo }} - {{ pedido.fecha|date('d/m/Y H:i') }}</h3>
            <table border="1" cellpadding="8" cellspacing="0">
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Precio unitario</th>
                        <th>Unidades</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>
                <tbody>
                    {% set total = 0 %}
                    {% for item in pedido.productos %}
                        {% set subtotal = item.producto.precio * item.unidades %}
                        {% set total = total + subtotal %}
                        <tr>
                            <td>{{ item.producto.nombre }}</td>
                            <td>{{ item.producto.precio|number_format(2, ',', '.') }} â‚¬</td>
                            <td>{{ item.unidades }}</td>
                            <td>{{ subtotal|number_format(2, ',', '.') }} â‚¬</td>
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3"><strong>Total</strong></td>
                        <td><strong>{{ total|number_format(2, ',', '.') }} â‚¬</strong></td>
                    </tr>
                </tfoot>
            </table>
            <hr>
        {% endfor %}
    {% else %}
        <p>No has realizado ningÃºn pedido ðŸ˜…</p>
    {% endif %}
{% endblock %}
